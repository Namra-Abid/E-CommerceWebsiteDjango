{% extends 'eShopApp/base.html' %}
{% load crispy_forms_tags %}
{% load cartsfilter %}
{% block title %} Cart Page{% endblock %}
{% block body %}
<div class="container">
    <div class="border rounded p-4 m-4">
        <p class="display-4 pl-4 ml-4">Cart</p>
        <table class="table table-striped">
            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col">Image</th>
                <th scope="col">Name </th>
                <th scope="col">Price</th>
                <th scope="col">Quantity</th>
                <th scope="col">Total Price</th>
              </tr>
            </thead>
            <tbody>
                {% for product in productsInCart %}
              <tr>
                <th scope="row">1</th>
                
                <td>
                    <img src="{{product.image.url}}" style="height:80px" alt="...">
                </td>
                <td>{{product.name}}</td>
                <td>{{product.price}}</td>                
                <td>{{product|count_in_cart:request.session.cart}}</td>
                <td>{{product|total_price_of_each_product:request.session.cart}}</td>
              </tr>
              {% endfor %}
            </tbody>
            <tfoot>
                <th colspan="4"></th>
                <th class="" colspan="">Total</th>
                <th> {{productsInCart|total_price_of_all_product:request.session.cart}}</th>
            </tfoot>
          </table>
          <hr>
          <div class="m-3 p-3">
            <a href="" class="btn btn-outline-info border rounded col-lg-4 float-right"> Add to Cart</a>
          </div>

    </div>
</div>
{% endblock %}